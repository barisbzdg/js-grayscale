<html>
    <head>
        <style>
            canvas{
            border :1px solid black;
            width:10%;
            }
        </style>
<script src = "https://www.dukelearntoprogram.com/course1/common/js/image/SimpleImage.js"> </script>
<script>
var image;
var grayImage;

function upload(){
  
  var fileinput=document.getElementById("finput");
  image = new SimpleImage(fileinput);
  grayImage = new SimpleImage(fileinput);
  var imgcanvas = document.getElementById("can");
  image.drawTo(imgcanvas);
}
function makeGray(){
  for (var x=0; x<grayImage.getWidth(); x++){
    for (var y=0; y<grayImage.getHeight(); y++){
      pixel=grayImage.getPixel(x,y);
      var avg=(pixel.getRed()+pixel.getGreen()+pixel.getBlue())/3;
      pixel.setRed(avg);
      pixel.setGreen(avg);
      pixel.setBlue(avg);
    }
  }
  var imagecanvas= document.getElementById("can2");
  grayImage.drawTo(imagecanvas);
}
</script>
    
       </head>
       <body>
<canvas id="can"> </canvas>
<canvas id="can2"> </canvas>

<br>


<input type="file" multiple="false" accept="image/*"
       id="finput" onchange="upload()">
<input type="button" value="make gray" onclick="makeGray()">
       </body>
</html>
